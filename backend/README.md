# FrankenJet backend

## Описание

Backend FrankenJet - это REST API, разработанный для энциклопедии истории авиации. Он предоставляет доступ к данным о статьях, воздушных судах, конструкторах и других сущностях проекта. Backend разработан с использованием асинхронного фреймворка FastAPI и PostgreSQL для хранения данных.

## Технологии

### Основные

* **Python:** 3.12
* **Фреймворк:** Асинхронный `FastAPI` для создания REST API.
* **База данных:** `PostgreSQL 17.x`
* **ORM:** `SQLAlchemy 2` для работы с базой данных, используется для определения моделей данных и выполнения запросов.
* **Асинхронный драйвер PostgreSQL:** `AsyncPG` для эффективной работы с базой данных в асинхронном режиме.
* **Миграции:** `Alembic` для управления изменениями схемы базы данных.
* **Аутентификация и авторизация:**
  * Используется `JWT (JSON Web Tokens)` для аутентификации и авторизации пользователей.
  * Поддержка access/refresh токенов.
* **Работа с облачным хранилищем:** `AIOBoto3` - асинхронная библиотека для взаимодействия с S3-совместимым хранилищем.
* **HTTP-клиент:** `AIOHTTP` для выполнения HTTP-запросов.
* **Конфигурация:** `Pydantic Settings` для загрузки настроек из переменных окружения в основном приложении и `Environs` для загрузки настроек из переменных окружения в скриптах инициализации приложения при запуске через `docker-compose`.
* **Безопасность:**  `bcrypt` для хеширования паролей.

### Инструменты разработки

* **Линтер:** `Ruff` для автоматической проверки стиля кода и поиска ошибок.

### Архитектура и Паттерны

Для обеспечения гибкости и масштабируемости в архитектуре backend используются следующие паттерны:

* **Репозиторий (Repository):** используется для абстрагирования логики доступа к данным, предоставляет интерфейс для выполнения операций CRUD над сущностями базы данных, скрывая детали реализации, связанные с SQLAlchemy и AsyncPG.
* **Сервисный слой (Service Layer):** бизнес-логика приложения вынесена в сервисный слой, принимает запросы от API-эндпоинтов, выполняют необходимые операции и возвращает результаты.
* **Контекстный менеджер DBManager:** для управления сессиями базы данных, обеспечивает автоматическое открытие и закрытие сессий, а также обработку исключений и откат транзакций, что упрощает работу с базой данных и предотвращает утечки соединений.

## Roadmap

* Добавить админку.
* Добавить аутентификацию через VK ID, Yandex ID, Telegram.
* Добавить тесты.
* Добавить gitlab ci/cd.
* Добавить Prometheus, Grafana, Grafana loki.
